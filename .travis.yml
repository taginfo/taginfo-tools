#-----------------------------------------------------------------------------
#
#  Configuration for continuous integration service at travis-ci.org
#
#-----------------------------------------------------------------------------

language: generic

sudo: false

#-----------------------------------------------------------------------------

addons_shortcuts:
  addons_packages: &packages
    apt:
      packages:
        - libbz2-dev
        - libexpat1-dev
        - libgd-dev
        - libicu-dev
        - libosmium2-dev
        - libprotozero-dev
        - libsqlite3-dev
        - zlib1g-dev

#-----------------------------------------------------------------------------

matrix:
  include:

    # Linux Clang Builds

    - os: linux
      dist: xenial
      compiler: linux-clang7-dev
      addons: *packages
      env: CC='clang-7' CXX='clang++-7' BUILD_TYPE='Dev'

    - os: linux
      dist: bionic
      compiler: linux-clang7-dev
      addons: *packages
      env: CC='clang-7' CXX='clang++-7' BUILD_TYPE='Dev'

    - os: linux
      dist: bionic
      compiler: linux-clang7-release
      addons: *packages
      env: CC='clang-7' CXX='clang++-7' BUILD_TYPE='Release'

    # Linux GCC Builds

    - os: linux
      dist: xenial
      compiler: linux-gcc5-dev
      addons: *packages
      env: CC='gcc-5' CXX='g++-5' BUILD_TYPE='Dev'

    - os: linux
      dist: bionic
      compiler: linux-gcc7-dev
      addons: *packages
      env: CC='gcc-7' CXX='g++-7' BUILD_TYPE='Dev'

    - os: linux
      dist: bionic
      compiler: linux-gcc7-release
      addons: *packages
      env: CC='gcc-7' CXX='g++-7' BUILD_TYPE='Release'

#-----------------------------------------------------------------------------

before_script:
  - mkdir build && cd build
  - cmake -LA .. -DCMAKE_BUILD_TYPE=${BUILD_TYPE}

script:
  - make VERBOSE=1

#-----------------------------------------------------------------------------
